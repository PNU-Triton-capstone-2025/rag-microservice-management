<!DOCTYPE html>
<html lang="ko" layout:decorate="~{layout/layout}" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <title>비공개 데이터 목록</title>
</head>
<body>
<section layout:fragment="page-content">
  <div class="container-fluid p-4">
    <div class="card shadow-sm">
      <div class="card-body">
        <h2 class="card-title mb-4">📁 비공개 데이터 목록</h2>

        <div th:if="${privateDataList.isEmpty()}" class="alert alert-info">
          등록된 비공개 데이터가 없습니다.
        </div>

        <div th:if="${!privateDataList.isEmpty()}">
          <div class="table-responsive">
            <table class="table table-hover table-striped align-middle">
              <thead class="table-light">
              <tr>
                <th><i class="bi bi-file-earmark-text me-1"></i>파일명</th>
                <th>Content Type</th>
                <th>업로드 시간</th>
                <th class="text-end">삭제</th>
              </tr>
              </thead>
              <tbody>
              <tr th:each="data : ${privateDataList}">
                <td>
                  <i class="bi bi-file-earmark me-2"></i>
                  <span th:text="${data.filename}">filename</span>
                </td>
                <td th:text="${data.contentType}">type</td>
                <td th:text="${#dates.format(data.createdAt, 'yyyy-MM-dd HH:mm')}">time</td>
                <td class="text-end">
                  <form th:action="@{/projects/{projectId}/private-data/{id}(projectId=${project.id}, id=${data.id})}"
                        method="post" class="d-inline">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit" class="btn btn-outline-danger btn-sm"
                            onclick="return confirm('정말 삭제하시겠습니까?');">
                      <i class="bi bi-trash"></i> 삭제
                    </button>
                  </form>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>

        <a th:href="@{/projects/{id}/chat(id=${project.id})}" class="btn btn-secondary mt-3">
          <i class="bi bi-arrow-left-circle me-1"></i> 프로젝트로 돌아가기
        </a>
      </div>
    </div>
  </div>
</section>
</body>
</html>